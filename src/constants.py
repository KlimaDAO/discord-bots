import os

from web3 import Web3

# Hard-coded since Polygon block times have stabilized
AVG_BLOCK_SECS = 2.21

# Token Decimals
BCT_DECIMALS = 18
FRAX_DECIMALS = 18
KLIMA_DECIMALS = 9
MCO2_DECIMALS = 18
NBO_DECIMALS = 18
UBO_DECIMALS = 18
NCT_DECIMALS = 18
USDC_DECIMALS = 12
BASE_USDC_DECIMALS = 6

# Token Addresses
BCT_ADDRESS = Web3.to_checksum_address('0x2f800db0fdb5223b3c3f354886d907a671414a7f')
KLIMA_ADDRESS = Web3.to_checksum_address('0x4e78011Ce80ee02d2c3e649Fb657E45898257815')
MCO2_ADDRESS = Web3.to_checksum_address('0xfc98e825a2264d890f9a1e68ed50e1526abccacd')
NBO_ADDRESS = Web3.to_checksum_address('0x6BCa3B77C1909Ce1a4Ba1A20d1103bDe8d222E48')
NCT_ADDRESS = Web3.to_checksum_address('0xD838290e877E0188a4A44700463419ED96c16107')
UBO_ADDRESS = Web3.to_checksum_address('0x2B3eCb0991AF0498ECE9135bcD04013d7993110c')
USDC_ADDRESS = Web3.to_checksum_address('0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174')
CCO2_ADDRESS = Web3.to_checksum_address('0x82B37070e43C1BA0EA9e2283285b674eF7f1D4E2')

# LP Pool Addresses
BCT_KLIMA_POOL = Web3.to_checksum_address('0x9803c7ae526049210a1725f7487af26fe2c24614')
KLIMA_MCO2_POOL = Web3.to_checksum_address('0x64a3b8ca5a7e406a78e660ae10c7563d9153a739')
KLIMA_NBO_POOL = Web3.to_checksum_address('0xE69E0E02297E2f3b4298F250ECFDC58207536327')
KLIMA_USDC_POOL = Web3.to_checksum_address('0x5786b267d35F9D011c4750e0B0bA584E1fDbeAD1')
UBO_KLIMA_POOL = Web3.to_checksum_address('0x09053745A04A7E78492ee8fdb866c750594F2a60')
USDC_NCT_POOL = Web3.to_checksum_address('0xdb995f975f1bfc3b2157495c47e4efb31196b2ca')
KLIMA_CCO2_POOL = Web3.to_checksum_address('0x4D2263FF85e334C1f1d04C6262F6c2580335a93C')

# Klima Protocol Contracts
STAKING_ADDRESS = Web3.to_checksum_address('0x25d28a24Ceb6F81015bB0b2007D795ACAc411b4d')
DISTRIBUTOR_ADDRESS = Web3.to_checksum_address('0x4cC7584C3f8FAABf734374ef129dF17c3517e9cB')
SKLIMA_ADDRESS = Web3.to_checksum_address('0xb0C22d8D350C67420f06F48936654f567C73E8C8')
DAO_WALLET_ADDRESS = Web3.to_checksum_address('0x65a5076c0ba74e5f3e069995dc3dab9d197d995c')

# Base Network Token Addresses
KLIMA_BASE_ADDRESS = Web3.to_checksum_address('0xDCEFd8C8fCc492630B943ABcaB3429F12Ea9Fea2')
WETH_BASE_ADDRESS = Web3.to_checksum_address('0x4200000000000000000000000000000000000006')
USDC_BASE_ADDRESS = Web3.to_checksum_address('0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913')
AERO_KLIMA_WETH_POOL_ADDRESS = Web3.to_checksum_address('0xB37642E87613d8569Fd8Ec80888eA6c63684E79e')
AERO_WETH_USDC_POOL_ADDRESS = Web3.to_checksum_address('0xcdac0d6c6c59727a65f871236188350531885c43')

# Subgraphs
GRAPH_API_KEY = os.environ.get('GRAPH_API_KEY')
GRAPH_BASE_URL = f'https://gateway-arbitrum.network.thegraph.com/api/{GRAPH_API_KEY}/subgraphs/id/'
GRAPH_DEV_BASE_URL = 'https://api.studio.thegraph.com/query/78559/'
GRAPH_VERSION_SUFFIX = '/version/latest'

PROTOCOL_SUBGRAPH_ID = 'AiHH7a5AJwnn8zAuENy3586m82fgosUs2346LWKgxmTJ'
CARBON_SUBGRAPH_ID = '9skh5pMQGRdyJcBe8PjWdDjLoYqoYTMLRDpFh6acSHUu'
BONDS_SUBGRAPH_ID = 'D7bejmu4JQ9mnnQhhrs6b3iEL17nviNuLhN5RJkeUDFn'
POLYGON_DIGITAL_CARBON_ID = 'ECLEwJKgujmiRCW1XbfbbUbpae2igeHa2KJ6BXNSWrZF'

if os.environ.get('ENV') == 'production':
    KLIMA_PROTOCOL_SUBGRAPH = GRAPH_BASE_URL + PROTOCOL_SUBGRAPH_ID
    KLIMA_CARBON_SUBGRAPH = GRAPH_BASE_URL + CARBON_SUBGRAPH_ID
    KLIMA_BONDS_SUBGRAPH = GRAPH_BASE_URL + BONDS_SUBGRAPH_ID
    POLYGON_DIGITAL_CARBON_SUBGRAPH = GRAPH_BASE_URL + POLYGON_DIGITAL_CARBON_ID
else:
    KLIMA_PROTOCOL_SUBGRAPH = GRAPH_DEV_BASE_URL + 'staging-klimadao-protocol-metrics' + GRAPH_VERSION_SUFFIX
    KLIMA_CARBON_SUBGRAPH = GRAPH_DEV_BASE_URL + 'staging-polygon-bridged-carbon' + GRAPH_VERSION_SUFFIX
    KLIMA_BONDS_SUBGRAPH = GRAPH_DEV_BASE_URL + 'staging-klimadao-bonds' + GRAPH_VERSION_SUFFIX
    POLYGON_DIGITAL_CARBON_SUBGRAPH = GRAPH_DEV_BASE_URL + 'staging-polygon-digital-carbon' + GRAPH_VERSION_SUFFIX
